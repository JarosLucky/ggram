# –ó–∞–ø—É—Å–∫ –Ω–∞ Garry's Mod —Å–µ—Ä–≤–µ—Ä–µ

> ‚ö†Ô∏è –í Garry's Mod –Ω–µ–º–Ω–æ–≥–æ –¥—Ä—É–≥–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤, –Ω–µ–∂–µ–ª–∏ –≤ —á–∏—Å—Ç–æ–º Lua. –í –≥–º–æ–¥–µ –Ω–µ –ø—Ä–∏–Ω—è—Ç–æ —Å–≤–µ—Ä—Ö—É –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ –¥–µ–ª–∞—Ç—å –∫–∞–∫–∏–µ-–ª–∏–±–æ `require()`, –Ω–æ –ø—Ä–∏–Ω—è—Ç–æ –≤—Å–µ –ø–æ–º–µ—â–∞—Ç—å –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ. –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ ggram –¥–µ–ª–∞–µ—Ç—Å—è —Å —É–∫–ª–æ–Ω–æ–º –Ω–∞ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å Lua, –Ω–∏–∂–µ –ø—Ä–∏–≤–æ–¥–∏—Ç—Å—è –ø—Ä–∏–º–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç ggram –≥–ª–æ–±–∞–ª—å–Ω—ã–º, –∞ –ø–æ–¥–≥—Ä—É–∑–∫—É –±–æ—Ç–æ–≤ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –Ω–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π, –∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π, –∫–∞–∫ –ø—Ä–∏–Ω—è—Ç–æ –≤ Garry's Mod.

–°–Ω–∏–∑—É –±—É–¥–µ—Ç –ø—Ä–∏–º–µ—Ä –∑–∞–≥—Ä—É–∑—á–∏–∫–∞, –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ—Ç–æ—Ä–æ–º—É —è –∑–∞–ø—É—Å–∫–∞–ª –∫–æ–¥ –≤—Å–µ—Ö –±–æ—Ç–æ–≤ —Å—Ä–∞–∑—É.

## ‚Ü™Ô∏è –ü–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏

1. /addons/ggram-mod/lua/autorun/ggram-launcher.lua _(–∫–æ–¥ –Ω–∏–∂–µ)_
2. /addons/ggram-mod/lua/`ggram.lua` _(–∑–∞–≥—Ä—É–∑–∏—Ç—Å—è —Å–∞–º–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –ø–æ–º–µ—Å—Ç–∏—Ç—Å—è –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, —á—Ç–æ–±—ã –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –±—ã–ª–æ –≤—Å–µ–≥–¥–∞ –¥–µ–ª–∞—Ç—å `local ggram = require("ggram")`)_
3. /addons/ggram-mod/lua/`ggram/extensions/*.lua` _(—Å—é–¥–∞ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–º–µ—Å—Ç–∏—Ç—å –ª—é–±—ã–µ —à—Ç—É—á–∫–∏-–¥—Ä—é—á–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–µ—Ç–µ –∑–∞—Ö–æ—Ç–µ—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –±–æ—Ç–∞—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä –≥–ª–æ–±–∞–ª—å–Ω—ã–µ chat_id, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã, —Ö–µ–ª–ø–µ—Ä-—Ñ—É–Ω–∫—Ü–∏–∏)_
4. /addons/ggram-mod/lua/`ggram/bots/*/_init.lua` _(–ø–∞–ø–∫–∏ —Å –≤–∞—à–∏–º–∏ –±–æ—Ç–∞–º–∏. \_init.lua —Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ –±—É–¥–µ—Ç –≥–ª–∞–≤–Ω—ã–º —Ñ–∞–π–ª–æ–º –≤–∞—â–µ–≥–æ –±–æ—Ç–∞. –í–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ –¥—Ä—É–≥–∏–µ —Ñ–∞–π–ª—ã –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ `include("path")`)_

## ‚ÑπÔ∏è –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

<img align="left" width="450" src="https://file.def.pm/iAllq439.jpg">

### /extensions
–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, —Ö—Ä–∞–Ω—è—â–∞—è –≤ —Å–µ–±–µ —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å–∞–º—ã–π –±–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤—Å–µ—Ö –±–æ—Ç–æ–≤. –≠—Ç–æ –º–æ–≥—É—Ç –±—ã—Ç—å –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –º–µ—Ç–∞—Ç–∞–±–ª–∏—Ü –±–æ—Ç–æ–≤, –∫–∞–∫–∏–µ-—Ç–æ ENUM –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã, —Ñ—É–Ω–∫—Ü–∏–∏-—É—Ç–∏–ª–∏—Ç—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä `escapeMarkdown(text)` –∏ —Ç.–¥. –≠—Ç–∏ —Ñ–∞–π–ª—ã –≥—Ä—É–∑—è—Ç—Å—è –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∞–º–∏—Ö –±–æ—Ç–æ–≤

### /bots
–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, –≤ –∫–æ—Ç–æ—Ä–æ–π –≤—ã –¥–æ–ª–∂–Ω—ã —Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–¥ –±–æ—Ç–æ–≤. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ—é –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é. –í `/bots/{anyname}` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ñ–∞–π–ª \_init.lua ‚Äî —ç—Ç–æ—Ç —Ñ–∞–π–ª –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –ø—Ä–∏ include –≤–∞—à–µ–≥–æ –±–æ—Ç–∞. –í—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ `/bots/{botname}` –∏ –∏–Ω–∫–ª—é–¥–∏—Ç—å –∏—Ö —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –∏–∑-–ø–æ–¥ \_init.lua.

---


## ü§ñ –ö–æ–¥ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞

–†–∞–∑–º–µ—Å—Ç–∏—Ç—å –ø–æ –ø—É—Ç–∏ `addons/ggram-mod/lua/autorun/ggram-launcher.lua`

```lua
-- This file should be shared for loading prior to SERVER
-- If it is loaded too late, ggram-dependent scripts may throw errors
if CLIENT then return end

local function loadBots(path, iDeep)
	iDeep = iDeep or 0

	local files,dirs = file.Find(path .. "/*","LUA")
	for _,f in ipairs(files) do
		if f == "_init.lua" then
			print("GG Loading Bot " .. path)
			include(path .. "/" .. f)
			break
		end
	end

	for _,d in ipairs(iDeep > 0 and dirs or {}) do
		loadBots(path .. "/" .. d, iDeep - 1)
	end
end

local function loadExtensions(path)
	local files = file.Find(path .. "/*","LUA")
	for _,f in ipairs(files) do
		local fpath = path .. "/" .. f
		print("GG Loading " .. fpath)
		include(fpath)
	end
end

local gmod_require_override do
	local require_cache = {}
	gmod_require_override = function(path)
		if require_cache[path] ~= nil then
			return require_cache[path]
		end

		local content = include(path .. ".lua")
		require_cache[path] = content or false
		return content
	end
end

gg_require_orig = gg_require_orig or require
-- Override to make "require("deferred")", "require("ggram.middlewares.name")", etc. work.
function require(path)
	path = path:gsub("%.", "/")
	return file.Exists(path .. ".lua", "LUA") and gmod_require_override(path) or gg_require_orig(path)
end

ggram = require("ggram")
loadExtensions("ggram/extensions")
loadBots("ggram/bots", 1)
```

---

> _–ï—Å–ª–∏ –æ—Å—Ç–∞–ª–∏—Å—å –≤–æ–ø—Ä–æ—Å—ã, –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–¥–∞—Ç—å –∏—Ö –≤ Telegram @amd_nick –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å Issue_
